# 🎮 ブラウザコンソールから表情やポーズを変えてみよう！

> **対象:** example-001 を動かしている状態で試せます  
> **難易度:** ⭐☆☆☆☆（超初心者OK！コピペでできます）

---

## 📖 この章で学ぶこと

- ブラウザの「開発者ツール」の開き方
- コンソールからVRMを直接操作する方法
- 表情（Expression）の変え方
- ポーズ（Bone）の変え方

---

## 🔧 Step 1: 開発者ツールを開こう

### 開き方

| ブラウザ | ショートカット | または |
|---------|--------------|--------|
| Chrome | `F12` | 右クリック → 「検証」 |
| Firefox | `F12` | 右クリック → 「要素を調査」 |
| Edge | `F12` | 右クリック → 「開発者ツールで調査する」 |

### 「Console」タブを選択

開発者ツールが開いたら、上部のタブから **「Console」** をクリックしてください。

```
┌─────────────────────────────────────────────────────┐
│ Elements | Console | Sources | Network | ...       │
│          ^^^^^^^^                                  │
│          ここをクリック！                            │
├─────────────────────────────────────────────────────┤
│ >                                                  │
│ ここにコマンドを入力できます                         │
│                                                    │
└─────────────────────────────────────────────────────┘
```

---

## 😊 Step 2: 表情を変えてみよう！

### 基本コマンド

以下のコードをコンソールにコピペして `Enter` を押してみましょう！

#### 😄 笑顔にする

```javascript
window.currentVrm.expressionManager.setValue('happy', 1.0);
```

#### 😢 悲しい顔にする

```javascript
window.currentVrm.expressionManager.setValue('sad', 1.0);
```

#### 😠 怒った顔にする

```javascript
window.currentVrm.expressionManager.setValue('angry', 1.0);
```

#### 😌 リラックスした顔にする

```javascript
window.currentVrm.expressionManager.setValue('relaxed', 1.0);
```

#### 😮 驚いた顔にする

```javascript
window.currentVrm.expressionManager.setValue('surprised', 1.0);
```

#### 😑 まばたき（目を閉じる）

```javascript
window.currentVrm.expressionManager.setValue('blink', 1.0);
```

### 🔄 表情をリセットする

全部の表情を0に戻す「リセットコマンド」です：

```javascript
['happy', 'sad', 'angry', 'relaxed', 'surprised', 'blink', 'blinkLeft', 'blinkRight', 'aa', 'ih', 'ou', 'ee', 'oh'].forEach(name => {
  window.currentVrm.expressionManager.setValue(name, 0);
});
```

---

## 👄 Step 3: 口の形を変えてみよう（リップシンク）

母音の口の形を作れます！

#### 「あ」の口

```javascript
window.currentVrm.expressionManager.setValue('aa', 1.0);
```

#### 「い」の口

```javascript
window.currentVrm.expressionManager.setValue('ih', 1.0);
```

#### 「う」の口

```javascript
window.currentVrm.expressionManager.setValue('ou', 1.0);
```

#### 「え」の口

```javascript
window.currentVrm.expressionManager.setValue('ee', 1.0);
```

#### 「お」の口

```javascript
window.currentVrm.expressionManager.setValue('oh', 1.0);
```

---

## 👀 Step 4: 視線を変えてみよう

#### 上を見る

```javascript
window.currentVrm.expressionManager.setValue('lookUp', 1.0);
```

#### 下を見る

```javascript
window.currentVrm.expressionManager.setValue('lookDown', 1.0);
```

#### 左を見る

```javascript
window.currentVrm.expressionManager.setValue('lookLeft', 1.0);
```

#### 右を見る

```javascript
window.currentVrm.expressionManager.setValue('lookRight', 1.0);
```

---

## 🦴 Step 5: ポーズ（ボーン）を変えてみよう

### 頭を傾ける

#### 首を左に傾ける

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('head').rotation.z = 0.3;
```

#### 首を右に傾ける

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('head').rotation.z = -0.3;
```

#### うなずく（下を向く）

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('head').rotation.x = 0.3;
```

#### 上を向く

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('head').rotation.x = -0.3;
```

### 腕を動かす

#### 右腕を上げる

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('rightUpperArm').rotation.z = -1.5;
```

#### 左腕を上げる

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('leftUpperArm').rotation.z = 1.5;
```

#### 両腕を上げる（バンザイ！）

```javascript
window.currentVrm.humanoid.getNormalizedBoneNode('rightUpperArm').rotation.z = -2.5;
window.currentVrm.humanoid.getNormalizedBoneNode('leftUpperArm').rotation.z = 2.5;
```

### 🔄 ポーズをリセットする

```javascript
['head', 'neck', 'chest', 'spine', 'leftUpperArm', 'rightUpperArm', 'leftLowerArm', 'rightLowerArm'].forEach(boneName => {
  const bone = window.currentVrm.humanoid.getNormalizedBoneNode(boneName);
  if (bone) {
    bone.rotation.set(0, 0, 0);
  }
});
```

---

## 🎨 Step 6: 組み合わせて遊ぼう！

### 😊✋ 笑顔で手を振る

```javascript
// 笑顔にする
window.currentVrm.expressionManager.setValue('happy', 1.0);
// 右腕を上げる
window.currentVrm.humanoid.getNormalizedBoneNode('rightUpperArm').rotation.z = -1.5;
// 右ひじを曲げる
window.currentVrm.humanoid.getNormalizedBoneNode('rightLowerArm').rotation.y = -1.0;
```

### 😢🙇 悲しくてうつむく

```javascript
// 悲しい顔
window.currentVrm.expressionManager.setValue('sad', 1.0);
// うつむく
window.currentVrm.humanoid.getNormalizedBoneNode('head').rotation.x = 0.4;
window.currentVrm.humanoid.getNormalizedBoneNode('spine').rotation.x = 0.2;
```

### 😮👀 驚いて横を見る

```javascript
// 驚いた顔
window.currentVrm.expressionManager.setValue('surprised', 1.0);
// 左を見る
window.currentVrm.expressionManager.setValue('lookLeft', 1.0);
// 首を少し左に向ける
window.currentVrm.humanoid.getNormalizedBoneNode('head').rotation.y = 0.3;
```

---

## 📊 使える表情・ボーン一覧

### 表情（Expression）一覧

| 名前 | 説明 | 値の範囲 |
|-----|------|---------|
| `happy` | 喜び・笑顔 | 0.0〜1.0 |
| `angry` | 怒り | 0.0〜1.0 |
| `sad` | 悲しみ | 0.0〜1.0 |
| `relaxed` | リラックス | 0.0〜1.0 |
| `surprised` | 驚き | 0.0〜1.0 |
| `blink` | まばたき（両目） | 0.0〜1.0 |
| `blinkLeft` | 左目だけ閉じる（ウィンク） | 0.0〜1.0 |
| `blinkRight` | 右目だけ閉じる（ウィンク） | 0.0〜1.0 |
| `aa` | 「あ」の口 | 0.0〜1.0 |
| `ih` | 「い」の口 | 0.0〜1.0 |
| `ou` | 「う」の口 | 0.0〜1.0 |
| `ee` | 「え」の口 | 0.0〜1.0 |
| `oh` | 「お」の口 | 0.0〜1.0 |
| `lookUp` | 上を見る | 0.0〜1.0 |
| `lookDown` | 下を見る | 0.0〜1.0 |
| `lookLeft` | 左を見る | 0.0〜1.0 |
| `lookRight` | 右を見る | 0.0〜1.0 |

### ボーン（Bone）一覧

| 名前 | 説明 |
|-----|------|
| `head` | 頭 |
| `neck` | 首 |
| `chest` | 胸 |
| `spine` | 背骨 |
| `hips` | 腰 |
| `leftUpperArm` / `rightUpperArm` | 上腕 |
| `leftLowerArm` / `rightLowerArm` | 前腕 |
| `leftHand` / `rightHand` | 手 |
| `leftUpperLeg` / `rightUpperLeg` | 太もも |
| `leftLowerLeg` / `rightLowerLeg` | すね |
| `leftFoot` / `rightFoot` | 足 |

### 回転軸の説明

| 軸 | 動き |
|----|------|
| `rotation.x` | 前後に傾く（うなずく/のけぞる） |
| `rotation.y` | 左右に回転（横を向く） |
| `rotation.z` | 横に傾く（首をかしげる） |

> 💡 **ヒント:** 値は **ラジアン** で指定します。`Math.PI` = 180度、`Math.PI / 2` = 90度 です。

---

## ❓ よくある質問

### Q: `undefined` と表示されるけど大丈夫？

**A: 大丈夫です！** `undefined` は「この命令は何も返さない」という意味で、エラーではありません。モデルを見て変化を確認してください。

### Q: エラーが出て動かない

よくあるエラーと対処法：

| エラー | 原因 | 対処法 |
|-------|------|--------|
| `Cannot read properties of undefined` | VRMがまだ読み込まれていない | 少し待ってから再実行 |
| `null is not an object` | ボーン名が間違っている | 正しいボーン名を確認 |

### Q: アニメーション中でも変更できる？

**A: できますが、アニメーションに上書きされることがあります。** アニメーションを止めてから試すとわかりやすいです：

```javascript
// アニメーションを一時停止
// （main.js の currentMixer にアクセスできる場合）
```

---

## 🎓 次のステップ

コンソールで操作できるようになったら、次はコードで制御してみましょう！

👉 [example-002](../../example-002/README.MD) ではGUIスライダーで同じことができます！